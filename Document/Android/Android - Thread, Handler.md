# Android - Thread, Handler

## Thread

스레드(Thread)란 프로세스 내에서 "순차적으로 실행되는 실행 흐름"의 최소 단위를 말한다.

스레드는 여러 갈래의 작업 흐름을 만듦으로써 여러 동작을 가능하게 해준다.

안드로이드에서는 2가지의 스레드가 존재한다.

- 메인 스레드(UI스레드) : 일반적인 코드 처리, 화면을 갱신하는 처리

- 작업(워커) 스레드(백그라운드 스레드): 백그라운드에서 작업을 처리(ex 다운로드 서비스)

  

## Main Thread(메인 스레드, UI스레드)

메인스레드는 안드로이드의 UI작업(화면 구성에 관한 기능)을 한다. 이런 UI작업은 메인스레드에서만 가능하다.  왜냐하면 워커스레드에서도 UI 작업이 가능하다고 할 때 동일한 UI를 작업한다면 교착상태(deadlock)가 발생하기 때문이다.



## Worker Thread(워커 스레드)

워커 스레드는 따로 코드로 생성해주어 백그라운드에서 다운로드 서비스와 같은 작업을 처리해주는 스레드이다. 이런 워커 스레드는 UI작업을 수행하지 못한다.



## Handler(핸들러)

**만약 워커스레드를 사용하여 다운로드를 진행하며 화면에 진행도를 표시하려면 어떻게 해야 할까?**

이럴때 필요한게 핸들러이다. 핸들러는 작업스레드와 메인 스레드를 이어주는 역할을 한다.

스레드는 UI변경 요청을 메세지 형태로 만들어 핸들러에게 전달 하게 된다.

핸들러를 사용할 때 필요한 세 가지 단계가 있다.

- obtainMessage() : 호출의 결과로 메시지 객체를 리턴 받게한다
- sendMessage() : Message Queue 에 넣는다
- handleMessage() : 메소드에 정의된 기능이 수행된다.